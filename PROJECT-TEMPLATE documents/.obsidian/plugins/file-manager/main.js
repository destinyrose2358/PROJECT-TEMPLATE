/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var At=Object.create;var B=Object.defineProperty;var Et=Object.getOwnPropertyDescriptor;var vt=Object.getOwnPropertyNames;var yt=Object.getPrototypeOf,Ct=Object.prototype.hasOwnProperty;var R=(n,t)=>()=>(t||n((t={exports:{}}).exports,t),t.exports),xt=(n,t)=>{for(var e in t)B(n,e,{get:t[e],enumerable:!0})},Pe=(n,t,e,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of vt(t))!Ct.call(n,i)&&i!==e&&B(n,i,{get:()=>t[i],enumerable:!(s=Et(t,i))||s.enumerable});return n};var M=(n,t,e)=>(e=n!=null?At(yt(n)):{},Pe(t||!n||!n.__esModule?B(e,"default",{value:n,enumerable:!0}):e,n)),Pt=n=>Pe(B({},"__esModule",{value:!0}),n);var de=R((Ps,Me)=>{"use strict";var Re=require("fs"),pe;function Ot(){try{return Re.statSync("/.dockerenv"),!0}catch(n){return!1}}function Rt(){try{return Re.readFileSync("/proc/self/cgroup","utf8").includes("docker")}catch(n){return!1}}Me.exports=()=>(pe===void 0&&(pe=Ot()||Rt()),pe)});var De=R((Ss,ue)=>{"use strict";var Mt=require("os"),$t=require("fs"),$e=de(),Ne=()=>{if(process.platform!=="linux")return!1;if(Mt.release().toLowerCase().includes("microsoft"))return!$e();try{return $t.readFileSync("/proc/version","utf8").toLowerCase().includes("microsoft")?!$e():!1}catch(n){return!1}};process.env.__IS_WSL_TEST__?ue.exports=Ne:ue.exports=Ne()});var Be=R((Ts,Le)=>{"use strict";Le.exports=(n,t,e)=>{let s=i=>Object.defineProperty(n,t,{value:i,enumerable:!0,writable:!0});return Object.defineProperty(n,t,{configurable:!0,enumerable:!0,get(){let i=e();return s(i),i},set(i){s(i)}}),n}});var ze=R((ks,Xe)=>{var Nt=require("path"),Dt=require("child_process"),{promises:K,constants:Ge}=require("fs"),W=De(),Lt=de(),fe=Be(),Ve=Nt.join(__dirname,"xdg-open"),{platform:S,arch:He}=process,Bt=()=>{try{return K.statSync("/run/.containerenv"),!0}catch(n){return!1}},he;function Vt(){return he===void 0&&(he=Bt()||Lt()),he}var Ht=(()=>{let n="/mnt/",t;return async function(){if(t)return t;let e="/etc/wsl.conf",s=!1;try{await K.access(e,Ge.F_OK),s=!0}catch(r){}if(!s)return n;let i=await K.readFile(e,{encoding:"utf8"}),o=/(?<!#.*)root\s*=\s*(?<mountPoint>.*)/g.exec(i);return o?(t=o.groups.mountPoint.trim(),t=t.endsWith("/")?t:`${t}/`,t):n}})(),We=async(n,t)=>{let e;for(let s of n)try{return await t(s)}catch(i){e=i}throw e},G=async n=>{if(n={wait:!1,background:!1,newInstance:!1,allowNonzeroExitCode:!1,...n},Array.isArray(n.app))return We(n.app,a=>G({...n,app:a}));let{name:t,arguments:e=[]}=n.app||{};if(e=[...e],Array.isArray(t))return We(t,a=>G({...n,app:{name:a,arguments:e}}));let s,i=[],o={};if(S==="darwin")s="open",n.wait&&i.push("--wait-apps"),n.background&&i.push("--background"),n.newInstance&&i.push("--new"),t&&i.push("-a",t);else if(S==="win32"||W&&!Vt()&&!t){let a=await Ht();s=W?`${a}c/Windows/System32/WindowsPowerShell/v1.0/powershell.exe`:`${process.env.SYSTEMROOT}\\System32\\WindowsPowerShell\\v1.0\\powershell`,i.push("-NoProfile","-NonInteractive","\u2013ExecutionPolicy","Bypass","-EncodedCommand"),W||(o.windowsVerbatimArguments=!0);let l=["Start"];n.wait&&l.push("-Wait"),t?(l.push(`"\`"${t}\`""`,"-ArgumentList"),n.target&&e.unshift(n.target)):n.target&&l.push(`"${n.target}"`),e.length>0&&(e=e.map(c=>`"\`"${c}\`""`),l.push(e.join(","))),n.target=Buffer.from(l.join(" "),"utf16le").toString("base64")}else{if(t)s=t;else{let a=!__dirname||__dirname==="/",l=!1;try{await K.access(Ve,Ge.X_OK),l=!0}catch(u){}s=process.versions.electron||S==="android"||a||!l?"xdg-open":Ve}e.length>0&&i.push(...e),n.wait||(o.stdio="ignore",o.detached=!0)}n.target&&i.push(n.target),S==="darwin"&&e.length>0&&i.push("--args",...e);let r=Dt.spawn(s,i,o);return n.wait?new Promise((a,l)=>{r.once("error",l),r.once("close",c=>{if(!n.allowNonzeroExitCode&&c>0){l(new Error(`Exited with code ${c}`));return}a(r)})}):(r.unref(),r)},me=(n,t)=>{if(typeof n!="string")throw new TypeError("Expected a `target`");return G({...t,target:n})},Wt=(n,t)=>{if(typeof n!="string")throw new TypeError("Expected a `name`");let{arguments:e=[]}=t||{};if(e!=null&&!Array.isArray(e))throw new TypeError("Expected `appArguments` as Array type");return G({...t,app:{name:n,arguments:e}})};function Ke(n){if(typeof n=="string"||Array.isArray(n))return n;let{[He]:t}=n;if(!t)throw new Error(`${He} is not supported`);return t}function ge({[S]:n},{wsl:t}){if(t&&W)return Ke(t);if(!n)throw new Error(`${S} is not supported`);return Ke(n)}var X={};fe(X,"chrome",()=>ge({darwin:"google chrome",win32:"chrome",linux:["google-chrome","google-chrome-stable","chromium"]},{wsl:{ia32:"/mnt/c/Program Files (x86)/Google/Chrome/Application/chrome.exe",x64:["/mnt/c/Program Files/Google/Chrome/Application/chrome.exe","/mnt/c/Program Files (x86)/Google/Chrome/Application/chrome.exe"]}}));fe(X,"firefox",()=>ge({darwin:"firefox",win32:"C:\\Program Files\\Mozilla Firefox\\firefox.exe",linux:"firefox"},{wsl:"/mnt/c/Program Files/Mozilla Firefox/firefox.exe"}));fe(X,"edge",()=>ge({darwin:"microsoft edge",win32:"msedge",linux:["microsoft-edge","microsoft-edge-dev"]},{wsl:"/mnt/c/Program Files (x86)/Microsoft/Edge/Application/msedge.exe"}));me.apps=X;me.openApp=Wt;Xe.exports=me});var lt=R((Gs,at)=>{function et(n){return Array.isArray(n)?n:[n]}var Ee="",tt=" ",we="\\",jt=/^\s+$/,qt=/(?:[^\\]|^)\\$/,Zt=/^\\!/,Jt=/^\\#/,Qt=/\r?\n/g,es=/^\.*\/|^\.+$/,Ae="/",nt="node-ignore";typeof Symbol!="undefined"&&(nt=Symbol.for("node-ignore"));var st=nt,ts=(n,t,e)=>Object.defineProperty(n,t,{value:e}),ss=/([0-z])-([0-z])/g,ot=()=>!1,is=n=>n.replace(ss,(t,e,s)=>e.charCodeAt(0)<=s.charCodeAt(0)?t:Ee),ns=n=>{let{length:t}=n;return n.slice(0,t-t%2)},os=[[/^\uFEFF/,()=>Ee],[/((?:\\\\)*?)(\\?\s+)$/,(n,t,e)=>t+(e.indexOf("\\")===0?tt:Ee)],[/(\\+?)\s/g,(n,t)=>{let{length:e}=t;return t.slice(0,e-e%2)+tt}],[/[\\$.|*+(){^]/g,n=>`\\${n}`],[/(?!\\)\?/g,()=>"[^/]"],[/^\//,()=>"^"],[/\//g,()=>"\\/"],[/^\^*\\\*\\\*\\\//,()=>"^(?:.*\\/)?"],[/^(?=[^^])/,function(){return/\/(?!$)/.test(this)?"^":"(?:^|\\/)"}],[/\\\/\\\*\\\*(?=\\\/|$)/g,(n,t,e)=>t+6<e.length?"(?:\\/[^\\/]+)*":"\\/.+"],[/(^|[^\\]+)(\\\*)+(?=.+)/g,(n,t,e)=>{let s=e.replace(/\\\*/g,"[^\\/]*");return t+s}],[/\\\\\\(?=[$.|*+(){^])/g,()=>we],[/\\\\/g,()=>we],[/(\\)?\[([^\]/]*?)(\\*)($|\])/g,(n,t,e,s,i)=>t===we?`\\[${e}${ns(s)}${i}`:i==="]"&&s.length%2===0?`[${is(e)}${s}]`:"[]"],[/(?:[^*])$/,n=>/\/$/.test(n)?`${n}$`:`${n}(?=$|\\/$)`],[/(\^|\\\/)?\\\*$/,(n,t)=>`${t?`${t}[^/]+`:"[^/]*"}(?=$|\\/$)`]],it=Object.create(null),rs=(n,t)=>{let e=it[n];return e||(e=os.reduce((s,[i,o])=>s.replace(i,o.bind(n)),n),it[n]=e),t?new RegExp(e,"i"):new RegExp(e)},Ce=n=>typeof n=="string",as=n=>n&&Ce(n)&&!jt.test(n)&&!qt.test(n)&&n.indexOf("#")!==0,ls=n=>n.split(Qt),ve=class{constructor(t,e,s,i){this.origin=t,this.pattern=e,this.negative=s,this.regex=i}},cs=(n,t)=>{let e=n,s=!1;n.indexOf("!")===0&&(s=!0,n=n.substr(1)),n=n.replace(Zt,"!").replace(Jt,"#");let i=rs(n,t);return new ve(e,n,s,i)},ps=(n,t)=>{throw new t(n)},v=(n,t,e)=>Ce(n)?n?v.isNotRelative(n)?e(`path should be a \`path.relative()\`d string, but got "${t}"`,RangeError):!0:e("path must not be empty",TypeError):e(`path must be a string, but got \`${t}\``,TypeError),rt=n=>es.test(n);v.isNotRelative=rt;v.convert=n=>n;var ye=class{constructor({ignorecase:t=!0,ignoreCase:e=t,allowRelativePaths:s=!1}={}){ts(this,st,!0),this._rules=[],this._ignoreCase=e,this._allowRelativePaths=s,this._initCache()}_initCache(){this._ignoreCache=Object.create(null),this._testCache=Object.create(null)}_addPattern(t){if(t&&t[st]){this._rules=this._rules.concat(t._rules),this._added=!0;return}if(as(t)){let e=cs(t,this._ignoreCase);this._added=!0,this._rules.push(e)}}add(t){return this._added=!1,et(Ce(t)?ls(t):t).forEach(this._addPattern,this),this._added&&this._initCache(),this}addPattern(t){return this.add(t)}_testOne(t,e){let s=!1,i=!1;return this._rules.forEach(o=>{let{negative:r}=o;if(i===r&&s!==i||r&&!s&&!i&&!e)return;o.regex.test(t)&&(s=!r,i=r)}),{ignored:s,unignored:i}}_test(t,e,s,i){let o=t&&v.convert(t);return v(o,t,this._allowRelativePaths?ot:ps),this._t(o,e,s,i)}_t(t,e,s,i){if(t in e)return e[t];if(i||(i=t.split(Ae)),i.pop(),!i.length)return e[t]=this._testOne(t,s);let o=this._t(i.join(Ae)+Ae,e,s,i);return e[t]=o.ignored?o:this._testOne(t,s)}ignores(t){return this._test(t,this._ignoreCache,!1).ignored}createFilter(){return t=>!this.ignores(t)}filter(t){return et(t).filter(this.createFilter())}test(t){return this._test(t,this._testCache,!0)}},Z=n=>new ye(n),ds=n=>v(n&&v.convert(n),n,ot);Z.isPathValid=ds;Z.default=Z;at.exports=Z;if(typeof process!="undefined"&&(process.env&&process.env.IGNORE_TEST_WIN32||process.platform==="win32")){let n=e=>/^\\\\\?\\/.test(e)||/["<>|\u0000-\u001F]+/u.test(e)?e:e.replace(/\\/g,"/");v.convert=n;let t=/^[a-z]:\//i;v.isNotRelative=e=>t.test(e)||rt(e)}});var bs={};xt(bs,{default:()=>ne});module.exports=Pt(bs);var wt=M(require("fs")),F=require("obsidian");var g=require("obsidian");var Se=require("obsidian"),oe=(s=>(s.SKIP="SKIP",s.OVERWRITE="OVERWRITE",s.KEEP="KEEP",s))(oe||{});var Te={["SKIP"]:"Skip",["OVERWRITE"]:"Overwrite",["KEEP"]:"Keep"},ke={...Te,["PROMPT"]:"Prompt user"},V=class extends Se.Modal{constructor(e,s){super(e);this.applyToAll=!1;let{contentEl:i}=this;this.setTitle("There is a conflict with: "),i.createDiv({cls:"fn-modal-content"}).createEl("p",{text:s});let r=i.createEl("div",{cls:"modal-button-container"}),a=r.createEl("label",{cls:"mod-checkbox"});a.tabIndex=-1;let l=a.createEl("input",{type:"checkbox"});a.appendText("Don't ask again"),l.addEventListener("change",d=>{let p=d.target;this.applyToAll=p.checked}),Object.values(oe).forEach(d=>{r.createEl("button",{text:Te[d],cls:"mod-cta"}).addEventListener("click",()=>{this.resolvePromise([d,this.applyToAll]),this.close()})}),r.createEl("button",{text:"Cancel",cls:"mod-cancel"}).addEventListener("click",async()=>{this.resolvePromise(["SKIP",this.applyToAll]),this.close()})}onClose(){this.resolvePromise&&this.resolvePromise(["SKIP",this.applyToAll])}openAndWait(){return new Promise(e=>{this.resolvePromise=e,this.open()})}};var Ie=require("path");function le(){let n=this.app.vault.adapter;return n instanceof g.FileSystemAdapter?n.getBasePath():""}function ce(n){let t=le(),e=(0,Ie.normalize)(`${t}/${n.path}`);return g.Platform.isDesktopApp&&g.Platform.isWin?e.replace(/\//g,"\\"):e}function Oe(n,t){let e=n.lastIndexOf(w),s=n.lastIndexOf(It);if(s>e){let[i,o]=[n.slice(0,s),n.slice(s+1)];return`${i}${t}.${o}`}return n+t}function St(n){let t=[],e=n.split(w);for(let s=1;s<e.length;s++)t.push(e.slice(0,s).join(w));return t}function re(n,t,e=!0){let s=t;for(let i=1;n.fileItems[s];i++)s=e?Oe(t,` ${i}`):`${t} ${i}`;return s}function Tt(n){n.sort((s,i)=>s.split(w).length-i.split(w).length);let t=new Map;n.forEach(s=>{var o;let i=s.split(w).length;t.has(i)||t.set(i,new Set),(o=t.get(i))==null||o.add(s)});let e=[];return t.forEach((s,i)=>{s.forEach(o=>{i===1?e.push(o):St(o).some(a=>{var l;return(l=t.get(a.split(w).length))==null?void 0:l.has(a)})||e.push(o)})}),e}function kt(n){let t=new Map;return n.forEach(e=>t.set(e,e.split(w).pop())),t}function $(n,t){let e=n.fileItems[t];if(e)for(;;){e.file instanceof g.TFolder&&e.setCollapsed(!1);let s=e.file.parent;if(!s||!s.name)break;e=e.parent}}function _t(n,t){let e=n.containerEl.querySelector(`[data-path="${t}"]`);e&&e.scrollIntoView({behavior:"smooth",block:"center"})}var ae="file-explorer",w="/",It=".",_e=["KEEP","OVERWRITE",null],H=class{constructor(t){this.plugin=t,this.app=t.app,this.vault=t.app.vault,this.workspace=t.app.workspace}getFileExplorer(){let t=this.workspace.getLeavesOfType(ae);return!t||t.length===0?null:t[0].view}getFileExplorerAndActiveFileOrFolder(){var s,i,o;let t=this.getFileExplorer();if(!t)return{fileExplorer:null,activeFileOrFolder:null};let e=(o=(s=t.tree.focusedItem)==null?void 0:s.file)!=null?o:(i=t.activeDom)==null?void 0:i.file;return{fileExplorer:t,activeFileOrFolder:e}}getActiveFileOrFolder(){return this.getFileExplorerAndActiveFileOrFolder().activeFileOrFolder}getSelectedFilesOrFolders(t=!0){let{fileExplorer:e,activeFileOrFolder:s}=this.getFileExplorerAndActiveFileOrFolder();return e?e.tree.selectedDoms.size===0?t?s?[s]:[]:[]:Array.from(Array.from(e.tree.selectedDoms.values()).map(i=>i.file)):[]}getSelectedFilesOrFoldersPath(t=!1,e=!0){let s=this.getSelectedFilesOrFolders(e).map(i=>i.path);return t?Tt(s):s}getSelectedPathToNameMap(t=!1,e=!0){return kt(this.getSelectedFilesOrFoldersPath(t,e))}isFileExplorerAvailable(){return this.getFileExplorer()!==null}isFileExplorerActive(){let t=this.workspace.getActiveViewOfType(g.View);return(t==null?void 0:t.getViewType())===ae}isActiveFileOrFolderAvailable(){if(!this.isFileExplorerActive())return!1;let{activeFileOrFolder:t}=this.getFileExplorerAndActiveFileOrFolder();return t!==null}isFile(t){var e;try{return((e=this.getFileExplorer())==null?void 0:e.fileItems[t].file)instanceof g.TFile}catch(s){return!1}}isFolder(t){var e;try{return((e=this.getFileExplorer())==null?void 0:e.fileItems[t].file)instanceof g.TFolder}catch(s){return!1}}_focusAndRenameFile(t,e){setTimeout(async()=>await t.startRenameFile(e),100)}async _conflictSolver(t,e,s,i,o=null){let r=!0;return await this.vault.exists(s)?(o||([o,r]=await this.plugin.getFileConflictResolutionMethod(s)),o==="OVERWRITE"?(await this.app.fileManager.trashFile(t.fileItems[s].file),await i(e,s),["OVERWRITE",r,s]):o==="KEEP"?(s=re(t,s),await i(e,s),["KEEP",r,s]):["SKIP",r,s]):(await i(e,s),[null,r,s])}async _createFolder(t){let{fileExplorer:e,activeFileOrFolder:s}=this.getFileExplorerAndActiveFileOrFolder();if(!e||!s)return null;let i=t(s);if(!i)return null;i!==w&&$(e,i);let o=(i===w?"":i+w)+this.plugin.settings.newFolderName;o=re(e,o);let r=await this.vault.createFolder(o);return e.tree.setFocusedItem(e.fileItems[r.path],!0),this._focusAndRenameFile(e,r),o}async createSubFolder(){return await this._createFolder(t=>{var e;return t instanceof g.TFolder?t.path:(e=t.parent)==null?void 0:e.path})}async createFolder(){return await this._createFolder(t=>{var e;return(e=t.parent)==null?void 0:e.path})}async createNote(){var r;let{fileExplorer:t,activeFileOrFolder:e}=this.getFileExplorerAndActiveFileOrFolder();if(!t||!e)return null;let s=e instanceof g.TFolder?e.path:(r=e.parent)==null?void 0:r.path;$(t,s);let i=re(t,s+w+this.plugin.settings.newNoteName);await this.vault.create(i,"");let o=t.fileItems[i];return t.tree.setFocusedItem(o,!0),this._focusAndRenameFile(t,o.file),i}async renameFile(){let{fileExplorer:t,activeFileOrFolder:e}=this.getFileExplorerAndActiveFileOrFolder();!t||!e||this.app.nextFrame(async()=>await t.startRenameFile(e))}async duplicateFile(){let{fileExplorer:t,activeFileOrFolder:e}=this.getFileExplorerAndActiveFileOrFolder();if(!t||!e)return;let s=e.path,i=Oe(s,this.plugin.settings.duplicateSuffix),[o,r,a]=await this._copyFileOrFolder(t,s,i,"KEEP"),l=t.fileItems[a].file;this._focusAndRenameFile(t,l)}async _moveFileOrFolder(t,e,s,i=null){return this._conflictSolver(t,e,s,async(o,r)=>{let a=t.app.fileManager,l=t.fileItems[o].file;await a.renameFile(l,r)},i)}async moveFiles(t,e=null,s=null){let i=new Map,o=this.getFileExplorer();if(!o)return i;e||(e=this.getSelectedPathToNameMap(!0));for(let[r,a]of e){let l=`${t}/${a}`,[c,u,d]=await this._moveFileOrFolder(o,r,l,s);_e.includes(c)&&$(o,t),i.set(l,c),u&&(s=c)}return i}async _copyFileOrFolder(t,e,s,i=null){return this._conflictSolver(t,e,s,async(o,r)=>{let a=t.fileItems[o].file;if(a instanceof g.TFile)await this.vault.copy(a,r);else if(a instanceof g.TFolder){let l=[];g.Vault.recurseChildren(a,c=>{l.push(c)});for(let c of l){let u=c.path.replace(new RegExp(`^${o}`),"");await this.vault.exists(`${r}${u}`)||(c instanceof g.TFile?await this.vault.copy(c,`${r}${u}`):c instanceof g.TFolder&&await this.vault.createFolder(`${r}${u}`))}}},i)}async copyFiles(t,e=null,s=null){let i=new Map,o=this.getFileExplorer();if(!o)return i;e||(e=this.getSelectedPathToNameMap(!0));for(let[r,a]of e){let l=`${t}/${a}`,[c,u,d]=await this._copyFileOrFolder(o,r,l,s);_e.includes(c)&&$(o,t),i.set(l,c),u&&(s=c)}return i}selectItems(t,e=!0){e&&this.deselectAll();let s=this.getFileExplorer();if(!s)return 0;let i=s.tree;return t.forEach(o=>{let r=s.fileItems[o];r&&i.selectItem(r)}),s.tree.selectedDoms.size}selectAll(t=!0){var r;let{fileExplorer:e,activeFileOrFolder:s}=this.getFileExplorerAndActiveFileOrFolder();if(!e||!s)return;let i=(r=s.parent)==null?void 0:r.path;if(!i)return;i=i===w?"":i+w;let o=e.tree;t&&o.clearSelectedDoms();for(let[a,l]of Object.entries(e.fileItems))a.startsWith(i)&&o.selectItem(l)}toggleSelect(t=!1){let{fileExplorer:e,activeFileOrFolder:s}=this.getFileExplorerAndActiveFileOrFolder();if(!e||!s)return;let i=e.tree;t&&i.clearSelectedDoms();let o=e.fileItems[s.path];e.tree.selectedDoms.has(o)?i.deselectItem(o):i.selectItem(o)}invertSelection(){let t=this.getFileExplorer();if(!t)return;let e=[];for(let i of Object.values(t.fileItems))t.tree.selectedDoms.has(i)||e.push(i);let s=t.tree;s.clearSelectedDoms(),e.forEach(i=>s.selectItem(i))}deselectAll(){let t=this.getFileExplorer();if(!t)return;t.tree.clearSelectedDoms()}focusPath(t){let{fileExplorer:e,activeFileOrFolder:s}=this.getFileExplorerAndActiveFileOrFolder();if(!e||!s)return null;let i=e.fileItems[t];i&&(this.workspace.setActiveLeaf(this.workspace.getLeavesOfType(ae)[0],{focus:!0}),$(e,t),e.tree.setFocusedItem(i,!0),_t(e,t))}};var h=require("obsidian");var Ue=require("obsidian"),je=M(ze()),z=M(require("path")),qe=require("fs"),x="{{file_path}}",T="{{folder_path}}",Y="{{file_name}}",U="{{folder_name}}",Kt="://";function Ye(n,t,e,s,i){return n=n.includes(x)?n.replace(x,t):n,n=n.includes(T)?n.replace(T,e):n,n=n.includes(Y)?n.replace(Y,s):n,n=n.includes(U)?n.replace(U,i):n,n}async function Ze(n,t,e,s,i,o){if(n.includes(Kt)){n=Ye(n,e,s,i,o),window.open(n);return}let r={};r.name=n,t=t.trim(),t&&(r.arguments=t.split(","),r.arguments.forEach((a,l)=>{a=a.trim(),a=Ye(a,e,s,i,o),r.arguments[l]=a})),await(0,je.default)("",{app:r})}async function Gt(n,t,e){let s=await qe.promises.stat(n),i=n,o=s.isDirectory()?n:z.default.dirname(n),r=z.default.basename(i),a=z.default.basename(o);await Ze(t,e,i,o,r,a)}async function Xt(n,t,e){let s=n instanceof Ue.TFolder?n:n.parent,i=ce(n),o=ce(s),r=n.name,a=s.name;await Ze(t,e,i,o,r,a)}async function k(n,t,e){typeof n=="string"?await Gt(n,t,e):await Xt(n,t,e)}var _=require("obsidian"),N=class extends _.FuzzySuggestModal{constructor(e,s){super(e);this.toDo=s;this.setPlaceholder("Search for a Lucide icon...")}getItems(){return(0,_.getIconIds)()}getItemText(e){return`lucide-${e}`}renderSuggestion(e,s){let i=s.createDiv();(0,_.setIcon)(i.createSpan(),e.item),i.createSpan({text:"  "}),i.createSpan({text:e.item})}onChooseItem(e,s){this.toDo(e)}};var Fe="files",be="folders",Yt="files and folders",Ut=[{value:Yt,text:"Files & Folders"},{value:Fe,text:"Files"},{value:be,text:"Folders"}],Qe={conflictResolutionMethod:"SKIP",showSelectionStatusBar:!0,showCopyMoveStats:!0,showClipboardStatusBar:!0,newFolderName:"New Folder",newNoteName:"New Note.md",duplicateSuffix:" - Copy",apps:[],patterns:[]},j="circle-dashed";function Je(n){return document.createRange().createContextualFragment(n)}var q=class extends h.PluginSettingTab{constructor(e,s){super(e,s);this.plugin=s}generalSection(e){new h.Setting(e).setName("Conflict resolution method").setDesc("Method to resolve conflicts in copy/move operations").addDropdown(s=>s.addOptions(ke).setValue(this.plugin.settings.conflictResolutionMethod).onChange(async i=>{this.plugin.settings.conflictResolutionMethod=i,await this.plugin.saveSettings()})),new h.Setting(e).setName("Show copy/move stats").setDesc("When a copy/move operation is done, show the stats").addToggle(s=>s.setValue(this.plugin.settings.showCopyMoveStats).onChange(async i=>{this.plugin.settings.showCopyMoveStats=i,await this.plugin.saveSettings()})),new h.Setting(e).setName("Show selection info in status bar").setDesc("Show, in the status bar, the number of selected files/folders").addToggle(s=>s.setValue(this.plugin.settings.showSelectionStatusBar).onChange(async i=>{this.plugin.settings.showSelectionStatusBar=i,await this.plugin.saveSettings()})),new h.Setting(e).setName("Show clipboard info in status bar").setDesc("Show, in the status bar, the number of files/folders in the clipboard").addToggle(s=>s.setValue(this.plugin.settings.showClipboardStatusBar).onChange(async i=>{this.plugin.settings.showClipboardStatusBar=i,await this.plugin.saveSettings()})),new h.Setting(e).setName("Duplicate suffix").setDesc("Suffix to add when file/folder is duplicated").addText(s=>s.setPlaceholder("Enter your suffix").setValue(this.plugin.settings.duplicateSuffix).onChange(async i=>{i&&(this.plugin.settings.duplicateSuffix=i),await this.plugin.saveSettings()})),new h.Setting(e).setName("New folder name").setDesc("Default name of the folder to create").addText(s=>s.setPlaceholder("Enter folder name").setValue(this.plugin.settings.newFolderName).onChange(async i=>{i&&(this.plugin.settings.newFolderName=i),await this.plugin.saveSettings()})),new h.Setting(e).setName("New note name").setDesc("Default name of the note to create").addText(s=>s.setPlaceholder("Enter note name").setValue(this.plugin.settings.newNoteName).onChange(async i=>{i&&(this.plugin.settings.newNoteName=i),await this.plugin.saveSettings()}))}openWithSection(e){new h.Setting(e).setName("Open with...").setHeading(),new h.Setting(e).setName("Add new application to open with");let i=e.createDiv({cls:"setting-item-description"}),o=`Use full <i>path to command</i> or just <i>command</i> if it is globally available
		    (for example <i>c:\\Program Files\\myTool\\myTool.exe</i> or <i>code</i> for VSCode).<BR><BR>

		    Arguments are optional and can include any of these predefined variables:<BR><BR>

            <b>${x}</b> - File path<BR>
            <b>${T}</b> - Folder path<BR>
            <b>${Y}</b> - File name<BR>
            <b>${U}</b> - Folder name<BR><BR>

            Sometimes the command needs the arguments to be send independently, 
            you can separate arguments using commas in those cases.<BR><BR>

            <b>Example 1:</b> Command: <i>/usr/bin/chromium-browser</i> | Arguments: <i>${x}</i><BR>
            <b>Example 2:</b> Command: <i>c:\\Program files\\OneCommander\\OneCommander.exe</i> | Arguments: <i>${x}</i><BR>
            <b>Example 3:</b> Command: <i>cmd</i> | Arguments: <i>/K cd ${T}</i><BR>
            <b>Example 4:</b> Command: <i>wt</i> | Arguments: <i>-p, Ubuntu, wsl, --cd, ${T}</i><BR><BR>

		    <b>NOTE:</b> No need to add double quotes for paths with spaces.<BR><BR>

            <b>New from 1.3.1:</b> You can also define an App URL Schema as a command (for example 
            <i>ulysses://x-callback-url/open?path=${x}</i>). When 
            defining an App URL Schema, arguments will be ignored.<BR><BR> `;i.appendChild(Je(o));let r=e.createDiv({cls:"settings-open-with-container"}),a=j,l=new h.ButtonComponent(r).setIcon(a).setTooltip("Choose icon").setClass("open-with-icon-btn").onClick(()=>{new N(this.app,p=>{a=p,a&&l.setIcon(a)}).open()}),c=r.createEl("input",{attr:{type:"text",placeholder:"Display name"},cls:"settings-open-with-name-inputbox"}),u=r.createEl("input",{attr:{type:"text",placeholder:"Command or full path command"},cls:"settings-open-with-cmd-inputbox"}),d=r.createEl("input",{attr:{type:"text",placeholder:"Arguments (optional)"},cls:"settings-open-with-args-inputbox"});new h.ButtonComponent(r).setIcon("rotate-ccw").setTooltip("Reset fields").setClass("open-with-reset-btn").onClick(()=>{c.value="",u.value="",d.value="",a=j,l.setIcon(a)}),new h.ButtonComponent(r).setIcon("circle-plus").setTooltip("Add command to open with...").setClass("open-with-add-btn").onClick(async()=>{let p=c.value.trim(),f=u.value.trim(),m=d.value.trim();if(!(p&&f))return new h.Notice("Display name & path/command are always neccessary.");this.plugin.addCommand(this.plugin.createOpenWithCmd(p,f,m));let b={name:p,cmd:f,args:m,showInMenu:!1,icon:a},E=this.plugin.settings.apps,C=E.find(D=>D.name===b.name);C?(new h.Notice(`Modifying ${b.name} command.`),C.args=b.args,C.cmd=b.cmd,C.icon=b.icon):(E.push(b),new h.Notice(`Adding ${b.name} command.`)),await this.plugin.saveSettings(),this.display()}),this.plugin.settings.apps.forEach(p=>{p.icon||(p.icon=j),new h.Setting(e).setName(p.name).setDesc(`Command: ${p.cmd}${p.args?` | Arguments: ${p.args}`:""}`).addToggle(f=>{let m=document.createElement("span");m.textContent="Show in File-Menu ",m.classList.add("settings-open-with-show-text"),f.toggleEl.parentElement.prepend(m),f.setValue(p.showInMenu).onChange(async b=>{p.showInMenu=b,await this.plugin.saveSettings()})}).addButton(f=>{f.setIcon(p.icon).setTooltip("Icon for command").onClick(()=>{new N(this.app,async m=>{p.icon=m,p.icon&&f.setIcon(p.icon),await this.plugin.saveSettings()}).open()})}).addButton(f=>{f.setIcon("pen").setTooltip("Edit command").onClick(async()=>{c.value=p.name,u.value=p.cmd,d.value=p.args,a=p.icon,l.setIcon(a)})}).addButton(f=>{f.setIcon("trash").setTooltip("Remove command").onClick(async()=>{this.plugin.settings.apps.remove(p),await this.plugin.saveSettings(),this.display()})})})}pathExplorerSection(e){new h.Setting(e).setName("Path explorer").setHeading(),new h.Setting(e).setName("Define patterns to match files and folders and open them with an Open with... command.");let i=e.createDiv({cls:"setting-item-description"}),o=`The <b>pathexplore</b> codeblock displays files and folders 
        from a specified path or multiple paths. You can define <b>patterns</b> to 
        match the names of files and/or folders, and bind an <b>Open with...</b> 
        command to open them. For files and folders that match the patterns, an 
        icon will appear next to their name (and they will also appear in the link 
        context menu). Clicking the icon will open the file or folder using the 
        associated command.<br><br>`;i.appendChild(Je(o));let r=e.createDiv({cls:"settings-path-explorer-container"}),a=r.createEl("input",{attr:{type:"text",placeholder:"Enter regular expression"},cls:"settings-path-explorer-regex"});r.createEl("div",{text:"Apply to: ",cls:"settings-path-explorer-label"});let l=r.createEl("select",{cls:"settings-path-explorer-dropdown dropdown"});Ut.map(d=>l.createEl("option",d)),r.createEl("div",{text:"Open with: ",cls:"settings-path-explorer-label"});let c=r.createEl("select",{cls:"settings-path-explorer-dropdown dropdown"}),u=this.plugin.settings.apps;for(let d of u.values())c.createEl("option",{value:d.name,text:d.name});new h.ButtonComponent(r).setIcon("rotate-ccw").setTooltip("Reset fields").setClass("settings-path-explorer-btn").onClick(()=>{a.value="",l.selectedIndex=0,c.selectedIndex=0}),new h.ButtonComponent(r).setIcon("circle-plus").setTooltip("Add pattern to open with...").setClass("settings-path-explorer-btn").onClick(async()=>{let d=a.value.trim(),p=l.value,f=c.value,m=u.find(L=>L.name===f),b=(m==null?void 0:m.icon)||j;if(!d||!f)return new h.Notice("Regular expression and Open with app are always neccessary.");let E={regex:d,applyTo:p,appName:f,icon:b},C=this.plugin.settings.patterns,D=C.find(L=>L.regex===E.regex&&L.appName===E.appName);D?(new h.Notice(`Modifiying ${E.regex} pattern.`),D.applyTo=E.applyTo):(C.push(E),new h.Notice(`Adding ${E.regex} pattern.`)),await this.plugin.saveSettings(),this.display()}),this.plugin.settings.patterns.forEach(d=>{let p=new h.Setting(e).setName(`${d.regex}`).setDesc(`All matching ${d.applyTo} will
                    be able to be open with ${d.appName}`).addButton(m=>{m.setIcon("pen").setTooltip("Edit command").onClick(async()=>{a.value=d.regex,l.value=d.applyTo,c.value=d.appName})}).addButton(m=>{m.setIcon("trash").setTooltip("Remove command").onClick(async()=>{this.plugin.settings.patterns.remove(d),await this.plugin.saveSettings(),this.display()})}),f=document.createElement("span");(0,h.setIcon)(f,d.icon),p.settingEl.prepend(f)})}display(){let{containerEl:e}=this;e.empty(),this.generalSection(e),this.openWithSection(e),this.pathExplorerSection(e)}};var O=require("obsidian");var ee=require("fs"),Ft=M(lt()),I=M(require("path"));var us=3,hs=100,ct="hide-files",pt="hide-folders",J="all",Q="root",te="none",xe={paths:[],ignorePatterns:[],maxDepth:us,maxFiles:hs,includeRoot:!1,flat:!1,hideFiles:!1,hideFolders:!1,hideIcons:!1,showAbsolutePath:te},fs="#",ms=" ",se="file:///",gs="path",Fs="ignore",dt="max-depth",ut="max-files",ht="include-root",ft="flat",mt="hide-icons",gt="absolute-path",A=class extends Error{constructor(t){super(t),this.name="PathExplorerException",Object.setPrototypeOf(this,A.prototype)}},P=class{constructor(t){this.plugin=t,this.workspace=t.app.workspace}static matchPattern(t,e,s,i){if(!(t.applyTo===Fe&&s||t.applyTo===be&&!s||!new RegExp(t.regex).test(e)))return i.find(a=>a.name===t.appName)}async processCodeBlock(t,e){try{let s=await this.parseConfig(t),i=await this.buildDirectoryTree(s),o=e.createDiv({cls:"path-explorer"});new O.ButtonComponent(o).setIcon("rotate-ccw").setTooltip("Refresh").setClass("path-explorer-refresh-button").onClick(()=>{let r=this.workspace.getActiveViewOfType(O.MarkdownView);r&&r.previewMode.rerender(!0)}),this.generateTreeHtml(i,o,s)}catch(s){s instanceof A&&e.createDiv({cls:"path-explorer-error"}).createSpan({text:`[PathExplorerError\u26A0\uFE0F] ${s.message}`})}}async parseConfig(t){let e={...xe,paths:[...xe.paths],ignorePatterns:[...xe.ignorePatterns]};if(t.split(`
`).forEach(s=>{if(s=s.trim(),!s||s.startsWith(fs))return;let i=s.indexOf(ms),o=i>=0?s.slice(0,i).trim():s,r=i>=0?s.slice(i+1).trim():"";switch(o.toLowerCase()){case gs:e.paths.push(r);break;case Fs:e.ignorePatterns.push(r);break;case dt:if(e.maxDepth=parseInt(r),isNaN(e.maxDepth))throw new A(`Invalid ${dt} value: ${r}`);break;case ut:if(e.maxFiles=parseInt(r),isNaN(e.maxFiles))throw new A(`Invalid ${ut} value: ${r}`);break;case ht:if(e.includeRoot=!0,r)throw new A(`No value expected for ${ht}.`);break;case mt:if(e.hideIcons=!0,r)throw new A(`No value expected for ${mt}.`);break;case ft:if(e.flat=!0,r===ct)e.hideFiles=!0;else if(r===pt)e.hideFolders=!0;else if(r)throw new A(`Invalid ${ft} option. Valid options: [${ct}|${pt}|<none>]`);break;case gt:if(r===J)e.showAbsolutePath=J;else if(r===Q)e.showAbsolutePath=Q;else if(r===te)e.showAbsolutePath=te;else throw new A(`Invalid ${gt} option. Valid options: [${J}|${Q}|${te}]`);break;default:throw new A(`Unknown option: ${o}`)}}),!e.paths||e.paths.length===0)throw new A("Path not provided (examples path /my/path | path ../relative | path c:\\my\\path).");for(let s=0;s<e.paths.length;s++){e.paths[s]=e.paths[s].replace(/\$([A-Za-z_][A-Za-z0-9_]*)|%([A-Za-z_][A-Za-z0-9_]*)%/g,(i,o,r)=>{let a=o||r;return a==="HOME"&&!process.env.HOME&&process.env.USERPROFILE?process.env.USERPROFILE:process.env[a]||`$${o||`%${r}%`}`}),I.default.isAbsolute(e.paths[s])||(e.paths[s]=I.default.join(le(),this.workspace.getActiveFile().parent.path,e.paths[s]));try{await ee.promises.access(e.paths[s])}catch(i){throw new A(`Path provided does not exist: ${e.paths[s]}`)}}return e}async buildDirectoryTree(t){async function e(r,a,l,c=0){if(c>t.maxDepth||s>=t.maxFiles)return null;let u=(await ee.promises.stat(r)).isDirectory();if(a!==r){let f=I.default.relative(a,r)+(u?"/":""),m=l.test(f);if(m.ignored&&!m.unignored)return null}s++;let d=!1;(t.showAbsolutePath===J||t.showAbsolutePath===Q&&c===0)&&(d=!0),d=u?d:!1;let p={name:d?r:I.default.basename(r),path:r,isDirectory:u};if(u){p.children=[];let f=await ee.promises.readdir(r,{withFileTypes:!0});for(let m of f){let b=I.default.join(r,m.name),E=await e(b,a,l,c+1);E&&p.children.push(E)}}return p}let s=0,i=(0,Ft.default)().add(t.ignorePatterns),o=[];for(let r=0;r<t.paths.length;r++){let a=t.paths[r],l=await e(a,a,i);l&&(t.includeRoot||!l.children?o.push(l):o.push(...l.children))}return o}generateTreeHtml(t,e,s){let i=this.plugin.settings.apps,o=this.plugin.settings.patterns;function r(a,l){function c(u,d){let p=d.createEl("li");return p.createSpan({text:u.isDirectory?"\u{1F4C2}  ":"\u{1F4C4} "}),p.createEl("a",{href:`${se}${encodeURI(u.path)}`,cls:"external-link",text:u.name}),s.hideIcons||o.forEach(f=>{let m=P.matchPattern(f,u.path,u.isDirectory,i);if(!m)return;let b=p.createSpan({cls:"clickable"});(0,O.setIcon)(b,m.icon),b.addEventListener("click",()=>{k(u.path,m.cmd,m.args)})}),p}for(let u of a)if(u.isDirectory){let d;s.hideFolders||(d=c(u,l)),u.children&&u.children.length>0&&(s.flat?r(u.children,l):r(u.children,d.createEl("ul")))}else s.hideFiles||c(u,l)}return r(t,e.createEl("ul"))}};var bt=require("obsidian"),y=class extends bt.FuzzySuggestModal{constructor(e,s,i){super(e);this.folders=s;this.toDo=i}getItems(){return this.folders}getItemText(e){return e.path}onChooseItem(e,s){(async()=>await this.toDo(e.path))()}};function ie(n){let t="";return n.forEach((e,s)=>{let i=s.split(w).pop();t+=e===null?`[DONE] ${i}
`:`[${e}] ${i}
`}),t}var ne=class extends F.Plugin{constructor(){super(...arguments);this.fm=new H(this);this.pe=new P(this);this.fileOperation="Copy"}_checkCallback(e,s,i,...o){return s()?(e||i(...o),!0):!1}_checkAsyncCallback(e,s,i,...o){return s()?((async()=>e||await i(...o))(),!0):!1}isActiveFileOrFolderCallback(e,s,...i){let o=this.fm.isActiveFileOrFolderAvailable.bind(this.fm);return this._checkCallback(e,o,s,...i)}isActiveFileOrFolderAsyncCallback(e,s,...i){let o=this.fm.isActiveFileOrFolderAvailable.bind(this.fm);return this._checkAsyncCallback(e,o,s,...i)}isActiveNoteCallback(e,s,...i){let o=()=>this.app.workspace.getActiveFile()instanceof F.TFile;return this._checkCallback(e,o,s,...i)}isActiveNoteAsyncCallback(e,s,...i){let o=()=>this.app.workspace.getActiveFile()instanceof F.TFile;return this._checkAsyncCallback(e,o,s,...i)}isFileExplorerActiveCallback(e,s,...i){let o=this.fm.isFileExplorerActive.bind(this.fm);return this._checkCallback(e,o,s,...i)}isFileExplorerActiveAsyncCallback(e,s,...i){let o=this.fm.isFileExplorerActive.bind(this.fm);return this._checkAsyncCallback(e,o,s,...i)}isFileExplorerAvailableCallback(e,s,...i){let o=this.fm.isFileExplorerAvailable.bind(this.fm);return this._checkCallback(e,o,s,...i)}isFileExplorerAvailableAsyncCallback(e,s,...i){let o=this.fm.isFileExplorerAvailable.bind(this.fm);return this._checkAsyncCallback(e,o,s,...i)}showSelectedInStatusBar(){this.selectedStatusBar.empty();let e=this.fm.getSelectedFilesOrFoldersPath(!1,!1);if(!this.settings.showSelectionStatusBar||!e)return;let s=0,i=0;for(let l of e){let c=this.app.vault.getAbstractFileByPath(l);c instanceof F.TFile?s++:c instanceof F.TFolder&&i++}if(s===0&&i===0)return;let o=s>0?`${s} \u{1F4C4}`:"",r=i>0?`${i} \u{1F4C2}`:"",a=s>0&&i>0?`(Selected: ${o} and ${r})`:`(Selected: ${o}${r})`;this.selectedStatusBar.createEl("span",{text:a})}showClipboardInStatusBar(){if(this.clipboardStatusBar.empty(),!this.settings.showClipboardStatusBar||!this.clipboard)return;let e=0,s=0;for(let l of this.clipboard.keys()){let c=this.app.vault.getAbstractFileByPath(l);c instanceof F.TFile?e++:c instanceof F.TFolder&&s++}if(e===0&&s===0)return;let i=e>0?`${e} \u{1F4C4}`:"",o=s>0?`${s} \u{1F4C2}`:"",r=this.fileOperation==="Copy"?"Copied to clipboard:":"Cut to clipboard:",a=e>0&&s>0?`(${r} ${i} and ${o})`:`(${r} ${i}${o})`;this.clipboardStatusBar.createEl("span",{text:a})}createOpenWithCmd(e,s,i){return{id:"open-with-"+e.toLowerCase(),name:"Open with "+e,checkCallback:o=>{let r=this.fm.isFileExplorerActive()?this.fm.getActiveFileOrFolder():this.app.workspace.getActiveFile();return r?(o||(async()=>await k(r,s,i))(),!0):!1}}}patchFileExplorerSelectionFunctions(){let e=this.fm.getFileExplorer();if(!e)return;let s=this.showSelectedInStatusBar.bind(this),i=e.tree,o=i.selectItem.bind(e.tree);i.selectItem=function(a){let l=o(a);return s(),l};let r=i.deselectItem.bind(e.tree);i.deselectItem=function(a){let l=r(a);return s(),l}}async onload(){this.settings=Qe,await this.loadSettings(),this.app.workspace.onLayoutReady(()=>{this.patchFileExplorerSelectionFunctions()}),this.registerStatusBarItems(),this.registerVaultEvents(),this.registerMarkdownCodeBlockProcessors(),this.registerCommands(),this.registerContextMenus(),this.addSettingTab(new q(this.app,this))}onunload(){}async getFileConflictResolutionMethod(e){let s=this.settings.conflictResolutionMethod;return s==="PROMPT"?await new V(this.app,e).openAndWait():[s,!0]}async loadSettings(){this.settings={...this.settings,...await this.loadData()}}async saveSettings(){await this.saveData(this.settings),this.showClipboardInStatusBar(),this.showSelectedInStatusBar()}registerStatusBarItems(){this.selectedStatusBar=this.addStatusBarItem(),this.clipboardStatusBar=this.addStatusBarItem()}registerVaultEvents(){this.app.vault.on("delete",e=>{this.clipboard&&this.clipboard.has(e.path)&&(this.clipboard.delete(e.path),this.showClipboardInStatusBar()),this.showSelectedInStatusBar()})}registerMarkdownCodeBlockProcessors(){this.registerMarkdownCodeBlockProcessor("pathexplorer",async(e,s,i)=>this.pe.processCodeBlock(e,s))}registerContextMenus(){this.registerEvent(this.app.workspace.on("file-menu",(e,s)=>{this.settings.apps.forEach(i=>{i.showInMenu&&e.addItem(o=>{o.setTitle(`Open with ${i.name}`).setIcon(i.icon).onClick(async()=>await k(s,i.cmd,i.args))})})})),this.registerEvent(this.app.workspace.on("url-menu",(e,s)=>{if(!s.startsWith(se))return;let i=decodeURI(s.replace(se,"")),o=this.settings.apps,r=this.settings.patterns;for(let a of r){let l=P.matchPattern(a,i,wt.default.statSync(i).isDirectory(),o);l&&e.addItem(c=>{c.setTitle(`Open with ${l.name}`).setIcon(l.icon).onClick(async()=>{await k(i,l.cmd,l.args)})})}}))}registerCommands(){this.addCommand({id:"create-subfolder",name:"Create a subfolder within the focused or active file/folder",checkCallback:e=>this.isActiveFileOrFolderAsyncCallback(e,this.fm.createSubFolder.bind(this.fm))}),this.addCommand({id:"create-folder",name:"Create a folder as sibling of the focused or active file/folder",checkCallback:e=>this.isActiveFileOrFolderAsyncCallback(e,this.fm.createFolder.bind(this.fm))}),this.addCommand({id:"create-note",name:"Create a note within the focused or active folder",checkCallback:e=>this.isActiveFileOrFolderAsyncCallback(e,this.fm.createNote.bind(this.fm))}),this.addCommand({id:"duplicate-file",name:"Duplicate focused or active file/folder",checkCallback:e=>this.isActiveFileOrFolderAsyncCallback(e,this.fm.duplicateFile.bind(this.fm))}),this.addCommand({id:"copy-files-to-clipboard",name:"Copy selected files/folders to clipboard",checkCallback:e=>this.isActiveFileOrFolderCallback(e,()=>{this.clipboard=this.fm.getSelectedPathToNameMap(!0),this.fileOperation="Copy",new F.Notice("Files copied to clipboard"),this.showClipboardInStatusBar()})}),this.addCommand({id:"cut-files-to-clipboard",name:"Cut selected files/folders to clipboard",checkCallback:e=>this.isActiveFileOrFolderCallback(e,()=>{this.clipboard=this.fm.getSelectedPathToNameMap(!0),this.fileOperation="Move",new F.Notice("Files cut to clipboard"),this.showClipboardInStatusBar()})}),this.addCommand({id:"paste-files-from-clipboard",name:"Paste files/folders from clipboard to selected folder",checkCallback:e=>this.isActiveFileOrFolderAsyncCallback(e,async()=>{if(this.clipboard){let i=await(this.fileOperation==="Copy"?this.fm.copyFiles.bind(this.fm):this.fm.moveFiles.bind(this.fm))(this.fm.getActiveFileOrFolder().path,this.clipboard);this.fileOperation==="Move"&&(this.clipboard=null,this.showClipboardInStatusBar()),this.settings.showCopyMoveStats&&new F.Notice(`${this.fileOperation} stats:

`+ie(i))}})}),this.addCommand({id:"clear-clipboard",name:"Clear clipboard",checkCallback:e=>{if(!this.clipboard)return!1;if(e)return!0;this.clipboard=null,this.showClipboardInStatusBar()}}),this.addCommand({id:"move-files",name:"Move selected files/folders to a new folder",checkCallback:e=>this.isActiveFileOrFolderCallback(e,()=>{new y(this.app,this.app.vault.getAllFolders(!0),async s=>{let i=await this.fm.moveFiles(s);this.settings.showCopyMoveStats&&new F.Notice(`Move stats:

`+ie(i))}).open()})}),this.addCommand({id:"move-note",name:"Move active note to a new folder",checkCallback:e=>this.isActiveNoteCallback(e,()=>{new y(this.app,this.app.vault.getAllFolders(!0),async s=>{let i=this.app.workspace.getActiveFile();if(!i)return;let o=new Map;o.set(i.path,i.name);let r=await this.fm.moveFiles(s,o);this.settings.showCopyMoveStats&&new F.Notice(`Move stats:

`+ie(r))}).open()})}),this.addCommand({id:"copy-files",name:"Copy selected files/folders to a new folder",checkCallback:e=>this.isActiveFileOrFolderCallback(e,()=>{new y(this.app,this.app.vault.getAllFolders(!0),async s=>{let i=await this.fm.copyFiles(s);this.settings.showCopyMoveStats&&new F.Notice(`Copy stats:

`+ie(i))}).open()})}),this.addCommand({id:"select-all",name:"Select all siblings and children of the focused or active file/folder",checkCallback:e=>this.isFileExplorerActiveCallback(e,()=>{this.fm.selectAll(!0),this.showSelectedInStatusBar()})}),this.addCommand({id:"toggle-select",name:"Toggle selection of the focused or active file/folder",checkCallback:e=>this.isFileExplorerActiveCallback(e,()=>{this.fm.toggleSelect(),this.showSelectedInStatusBar()})}),this.addCommand({id:"deselect-all",name:"Clear selection",checkCallback:e=>this.isFileExplorerActiveCallback(e,()=>{this.fm.deselectAll(),this.showSelectedInStatusBar()})}),this.addCommand({id:"invert-selection",name:"Invert selection",checkCallback:e=>this.isFileExplorerActiveCallback(e,()=>{this.fm.invertSelection(),this.showSelectedInStatusBar()})}),this.addCommand({id:"rename",name:"Rename focused or active file/folder",checkCallback:e=>this.isFileExplorerActiveCallback(e,this.fm.renameFile.bind(this.fm))}),this.addCommand({id:"go-to-in-file-explorer",name:"Go to file or folder in file explorer",checkCallback:e=>this.isFileExplorerAvailableCallback(e,()=>{let s=[...this.app.vault.getAllFolders(!0),...this.app.vault.getFiles()],i=this.app.workspace.getActiveFile();i&&i.parent instanceof F.TFolder&&s.unshift(i.parent),new y(this.app,s,async o=>{this.fm.focusPath(o)}).open()})}),this.addCommand({id:"go-to-folder_in-file-explorer",name:"Go to folder in file explorer",checkCallback:e=>this.isFileExplorerAvailableCallback(e,()=>{let s=this.app.vault.getAllFolders(!0),i=this.app.workspace.getActiveFile();i&&i.parent instanceof F.TFolder&&s.unshift(i.parent),new y(this.app,s,async o=>{this.fm.focusPath(o)}).open()})}),this.settings.apps.forEach(e=>{this.addCommand(this.createOpenWithCmd(e.name,e.cmd,e.args))})}};

/* nosourcemap */